<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NotaDez — Lançamento de Notas</title>

  <!-- CSS -->
  <link rel="stylesheet" href="styles/notas.css">
  <!-- Ícones (lucide) -->
  <script src="https://unpkg.com/lucide@latest" defer></script>
</head>
<body>
  <div class="sidebar">
    <h1>NotaDez</h1>
    <nav>
      <ul>
        <li><a href="dashboard.html"><i data-lucide="layout-dashboard"></i> Dashboard</a></li>
        <li><a href="instituicoes.html"><i data-lucide="school"></i> Instituições</a></li>
        <li><a href="disciplinas.html" class="active"><i data-lucide="book-open"></i> Disciplinas</a></li>
        <li><a href="turmas.html"><i data-lucide="users"></i> Turmas</a></li>
        <li><a href="notas.html"><i data-lucide="pencil"></i> Notas</a></li>
        <li><a href="index.html"><i data-lucide="log-out"></i> Sair</a></li>
      </ul>
    </nav>
  </div>

  <main class="main-content">
    <h2>Lançamento de Notas</h2>

    <section class="form-section">
      <h3>Selecione Instituição, Disciplina e Turma</h3>
      <form id="filtroForm" onsubmit="return false;">
        <div class="linha-filtros">
          <div class="campo">
            <label for="selectInstituicao">Instituição</label>
            <select id="selectInstituicao"><option value="">Selecione a instituição</option></select>
          </div>
          <div class="campo">
            <label for="selectDisciplina">Disciplina</label>
            <select id="selectDisciplina"><option value="">Selecione a disciplina</option></select>
          </div>
          <div class="campo">
            <label for="selectTurma">Turma</label>
            <select id="selectTurma"><option value="">Selecione a turma</option></select>
          </div>
        </div>
        <div class="linha-botao">
          <button id="btnCarregarAlunos" type="button" class="btn">Carregar alunos</button>
        </div>
      </form>
    </section>

    <div class="formula-container">
      <label for="formulaMedia">Fórmula da Média</label>
      <input id="formulaMedia" type="text" placeholder="Ex: (P1 + P2 + P3) / 3" />
      <small>Edite a fórmula se desejar. Use apenas siglas dos componentes.</small>
    </div>

    <!-- Container para controles extras (gerador pelo CSS/JS assume que existe) -->
    <div id="notasExtras" class="extras">
      <!-- JS irá preencher: Gerenciar Componentes, Modo de Edição, seletor de componente, toggle ajustar, export JSON -->
    </div>

    <!-- Tabela de notas -->
    <section class="list-section">
      <h3>Notas Lançadas</h3>
      <div id="tableWrapper"></div>
      <div id="nenhumaTabela" class="muted">Nenhuma tabela carregada. Selecione instituição, disciplina e turma.</div>
    </section>

    <div class="button-group">
      <button id="btnSalvarNotas" class="btn save">Salvar Notas</button>
      <button id="btnExportCsv" class="btn export">Exportar CSV</button>
    </div>

    <!-- Painel de Auditoria (inicialmente oculto) -->
    <section id="painelAuditoria" class="auditoria oculto">
      <h4>Painel de Auditoria</h4>
      <ul id="listaAuditoria" class="lista-auditoria"></ul>
    </section>

  </main>

  <footer>
    © 2025 NotaDez - Todos os direitos reservados
  </footer>

  <!-- Modal para Gerenciar Componentes -->
  <div id="compModal" class="modal oculto" aria-hidden="true">
    <div class="modal-content">
      <header class="modal-header">
        <h3>Gerenciador de Componentes</h3>
        <button id="closeCompModal" class="btn small">Fechar</button>
      </header>

      <div class="modal-body">
        <div class="comp-form">
          <input id="compNome" placeholder="Nome (ex: Prova 1)" />
          <input id="compSigla" placeholder="Sigla (ex: P1)" />
          <input id="compDesc" placeholder="Descrição (opcional)" />
          <button id="btnAddComp" class="btn">Adicionar</button>
        </div>

        <table id="compTable" class="comp-table">
          <thead><tr><th>Sigla</th><th>Nome</th><th>Descrição</th><th>Ações</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Modal Universal -->
<div id="appModal" class="modal oculto" aria-hidden="true">
  <div class="modal-content" id="appModalContent">
    <h3 id="appModalTitulo">Título</h3>

    <p id="appModalMensagem"></p>

    <!-- Campo somente quando for prompt -->
    <input id="appModalInput" class="oculto" type="text">

    <div class="modal-buttons">
      <button id="appModalCancel" class="btn cancel oculto">Cancelar</button>
      <button id="appModalOk" class="btn ok">OK</button>
    </div>
  </div>
</div>

  

  <!-- JS -->
  <script type="module" src="scripts/notas.js"></script>
</body>
</html>
