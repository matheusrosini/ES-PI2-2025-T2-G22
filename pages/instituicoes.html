<!-- Luis Felipe Moura: RA 25010218 -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de InstituiÃ§Ãµes - NotaDez</title>
  <link rel="stylesheet" href="styles/instituicoes.css">
</head>
<body>

  <!-- Sidebar fixa Ã  esquerda -->
  <aside class="sidebar">
    <h2>NotaDez</h2>
    <nav>
      <ul>
        <li><a href="dashboard.html">ğŸ  Dashboard</a></li>
        <li><a href="alunos.html">ğŸ‘¨â€ğŸ“ Alunos</a></li>
        <li class="active"><a href="#">ğŸ« InstituiÃ§Ãµes</a></li>
        <li><a href="disciplinas.html">ğŸ“š Disciplinas</a></li>
      </ul>
    </nav>
  </aside>

  <!-- ConteÃºdo principal -->
  <main class="main-content">
    <header>
      <h1>Cadastro de InstituiÃ§Ãµes</h1>
      <button id="addInstituicaoBtn">+ Nova InstituiÃ§Ã£o</button>
    </header>

    <!-- FormulÃ¡rio de cadastro/ediÃ§Ã£o -->
    <section id="formSection" class="hidden">
      <h2 id="formTitle">Nova InstituiÃ§Ã£o</h2>
      <form id="instituicaoForm">
        <label for="nome">Nome da InstituiÃ§Ã£o</label>
        <input type="text" id="nome" required>

        <label for="cnpj">CNPJ</label>
        <input type="text" id="cnpj" placeholder="00.000.000/0000-00" required>

        <label for="endereco">EndereÃ§o</label>
        <input type="text" id="endereco" required>

        <div class="form-buttons">
          <button type="submit">Salvar</button>
          <button type="button" id="cancelarBtn" class="cancelar">Cancelar</button>
        </div>
      </form>
    </section>

    <!-- Lista de instituiÃ§Ãµes -->
    <section class="tabela-section">
      <h2>InstituiÃ§Ãµes Cadastradas</h2>
      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th>CNPJ</th>
            <th>EndereÃ§o</th>
            <th>AÃ§Ãµes</th>
          </tr>
        </thead>
        <tbody id="instituicoesTable">
          <!-- As instituiÃ§Ãµes serÃ£o inseridas dinamicamente via JS -->
        </tbody>
      </table>
    </section>
  </main>

  <script>
    // Seletores principais
    const formSection = document.getElementById('formSection');
    const instituicaoForm = document.getElementById('instituicaoForm');
    const addBtn = document.getElementById('addInstituicaoBtn');
    const cancelBtn = document.getElementById('cancelarBtn');
    const table = document.getElementById('instituicoesTable');
    const formTitle = document.getElementById('formTitle');

    let instituicoes = [];
    let editIndex = null;

    // Mostrar formulÃ¡rio
    addBtn.addEventListener('click', () => {
      formSection.classList.remove('hidden');
      formTitle.textContent = "Nova InstituiÃ§Ã£o";
      instituicaoForm.reset();
      editIndex = null;
    });

    // Cancelar formulÃ¡rio
    cancelBtn.addEventListener('click', () => {
      formSection.classList.add('hidden');
      instituicaoForm.reset();
    });

    // Enviar formulÃ¡rio (criar/editar)
    instituicaoForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const nome = document.getElementById('nome').value.trim();
      const cnpj = document.getElementById('cnpj').value.trim();
      const endereco = document.getElementById('endereco').value.trim();

      if (editIndex === null) {
        instituicoes.push({ nome, cnpj, endereco });
      } else {
        instituicoes[editIndex] = { nome, cnpj, endereco };
      }

      atualizarTabela();
      instituicaoForm.reset();
      formSection.classList.add('hidden');
    });

    // Atualizar tabela
    function atualizarTabela() {
      table.innerHTML = "";
      instituicoes.forEach((inst, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${inst.nome}</td>
          <td>${inst.cnpj}</td>
          <td>${inst.endereco}</td>
          <td>
            <button class="edit" onclick="editar(${index})">âœï¸</button>
            <button class="delete" onclick="remover(${index})">ğŸ—‘ï¸</button>
          </td>
        `;
        table.appendChild(row);
      });
    }

    // Editar instituiÃ§Ã£o
    function editar(index) {
      const inst = instituicoes[index];
      document.getElementById('nome').value = inst.nome;
      document.getElementById('cnpj').value = inst.cnpj;
      document.getElementById('endereco').value = inst.endereco;
      formSection.classList.remove('hidden');
      formTitle.textContent = "Editar InstituiÃ§Ã£o";
      editIndex = index;
    }

    // Remover instituiÃ§Ã£o
    function remover(index) {
      instituicoes.splice(index, 1);
      atualizarTabela();
    }

    window.editar = editar;
    window.remover = remover;
  </script>
</body>
</html>
